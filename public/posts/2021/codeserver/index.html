<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Code-Server - Taking the home office to the outside - Lukas Spiss</title>
  <link rel="stylesheet" href="https:&#x2F;&#x2F;www.spiss.dev/screen.css" type="text/css" charset="utf-8" />
  <link rel="alternate" type="application/rss+xml" href="https:&#x2F;&#x2F;www.spiss.dev/rss.xml" title="Lukas Spiss" />
</head>
<body class="">
  
<h1 class="logo"><a href="https:&#x2F;&#x2F;www.spiss.dev/" class="no-border hover-underline">üë®üèª‚Äçüíª Lukas Spiss</a></h1>

<nav>
  
    
    
      <a href="https:&#x2F;&#x2F;www.spiss.dev&#x2F;" class="no-border hover-underline">Home</a>
    
  
    
    
      <span class="breadcrumb-sep">/</span>
      <a href="https:&#x2F;&#x2F;www.spiss.dev/&#x2F;posts&#x2F;" class="no-border hover-underline">Posts</a>
    
  
    
    
      <span class="breadcrumb-sep">/</span>
      <a href="https:&#x2F;&#x2F;www.spiss.dev/&#x2F;posts&#x2F;2021&#x2F;" class="no-border hover-underline">2021</a>
    
  
</nav>

<article id="codeserver">
  <h2>
    <a href="https:&#x2F;&#x2F;www.spiss.dev&#x2F;posts&#x2F;2021&#x2F;codeserver&#x2F;">Code-Server - Taking the home office to the outside</a>
  </h2>
  
  <div class="post-metadata">
    <div class="date-published">
      <svg class="date-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" version="1.1" x="0px" y="0px"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M38.6172116,78.6191533 L47.8030928,78.6191533 L47.8030928,69.4332721 L38.6172116,69.4332721 L38.6172116,78.6191533 Z M24.8586734,78.6191533 L34.0445546,78.6191533 L34.0445546,69.4332721 L24.8586734,69.4332721 L24.8586734,78.6191533 Z M66.1332478,64.2656288 L75.319129,64.2656288 L75.319129,55.0797476 L66.1332478,55.0797476 L66.1332478,64.2656288 Z M52.3757498,64.2656288 L61.561631,64.2656288 L61.561631,55.0797476 L52.3757498,55.0797476 L52.3757498,64.2656288 Z M38.6172116,64.2656288 L47.8030928,64.2656288 L47.8030928,55.0797476 L38.6172116,55.0797476 L38.6172116,64.2656288 Z M24.8586734,64.2656288 L34.0445546,64.2656288 L34.0445546,55.0797476 L24.8586734,55.0797476 L24.8586734,64.2656288 Z M66.1332478,49.9110641 L75.319129,49.9110641 L75.319129,40.7251829 L66.1332478,40.7251829 L66.1332478,49.9110641 Z M52.3757498,49.9110641 L61.561631,49.9110641 L61.561631,40.7251829 L52.3757498,40.7251829 L52.3757498,49.9110641 Z M38.6172116,49.9110641 L47.8030928,49.9110641 L47.8030928,40.7251829 L38.6172116,40.7251829 L38.6172116,49.9110641 Z M24.8586734,49.9110641 L34.0445546,49.9110641 L34.0445546,40.7251829 L24.8586734,40.7251829 L24.8586734,49.9110641 Z M13.1607434,90.8382164 L87.7337471,90.8382164 L87.7337471,30.2016227 L13.1607434,30.2016227 L13.1607434,90.8382164 Z M13.1617836,26.0408793 L87.7347873,26.0408793 L87.7347873,16.2662529 L13.1617836,16.2662529 L13.1617836,26.0408793 Z M73.5237682,12.1055095 L73.5237682,5 L69.3630249,5 L69.3630249,12.1055095 L31.5314656,12.1055095 L31.5314656,5 L27.3707222,5 L27.3707222,12.1055095 L9,12.1055095 L9,95 L91.8955307,95 L91.8955307,12.1055095 L73.5237682,12.1055095 Z" fill="currentColor"/></g></svg>
      <time datetime="2021-08-20">20 August 2021</time>
    </div>
  </div>
  

  <div class="post-body">
    <p>While working from home is nice and all, I wanted to level up my home office experience to allow me to work from basically anywhere, without having too many compromises. And because using my Dell XPS 13 would have been too easy of a choice, I challenged myself to use an iPad instead.</p>
<span id="continue-reading"></span><h3 id="the-challenge">The Challenge</h3>
<p>While iPads got the shiny new M1 processor and therefore loads of processing power, the coding experience is still pretty much nonexistent, due to the software limitations of iPadOS.
And that's where <a href="https://github.com/cdr/code-server">code-server</a> comes into play:</p>
<blockquote>
<p>Run VS Code on any machine anywhere and access it in the browser.</p>
</blockquote>
<p>Sounds perfect for my use case! </p>
<p>Below are some of the key steps I had to take to make it all work. However, this is not a detailed step by step guide.</p>
<h3 id="setting-up-code-server">Setting up Code-Server</h3>
<p>Code-server is available via the AUR for Arch Linux users at <a href="https://aur.archlinux.org/packages/code-server/">AUR link</a>.</p>
<p>Once installed, the actual set-up is pretty easy.</p>
<pre><code>$ cat ~&#x2F;.config&#x2F;code-server&#x2F;config.yaml

bind-addr: 0.0.0.0:1897
auth: password
password: XXXXXXXXXX
cert: false
</code></pre>
<pre><code>$ sudo systemctl edit --full code-server@USER

...
ExecStart=&#x2F;usr&#x2F;bin&#x2F;code-server --proxy-domain *.XXXXXXXXXX.spiss.dev
...
</code></pre>
<h3 id="setting-up-caddy">Setting up Caddy</h3>
<p>As the code-server docs suggest it, I decided to go for Caddy as my reverse proxy. This made the next part of the set-up pretty easy as well.
The only sort of annoying part was that I couldn't use the caddy package from the Arch repo, but I had to compile it from source together with the Route 53 plugin, which I use to manage my domain. See the GitHub Repo for more details: <a href="https://github.com/caddy-dns/route53">GitHub link</a></p>
<p>Once installed, I added this config file:</p>
<pre><code>$ cat &#x2F;etc&#x2F;caddy&#x2F;Caddyfile

XXXXXXXXXX.spiss.dev *.XXXXXXXXXX.spiss.dev {
  tls {
    dns route53 {
      max_retries 10
    }
  }

  reverse_proxy 127.0.0.1:1897
}
</code></pre>
<p>In order for Caddy to obtain a <strong>wildcard</strong> SSL certificate, I had to add a user which is allowed to manage my Route 53. See the GitHub repo for more details: <a href="https://github.com/libdns/route53">GitHub link</a></p>
<pre><code>$ sudo systemctl edit --full caddy.service

...
[Service]
Environment=AWS_ACCESS_KEY_ID=XXXXXXXXXX
Environment=AWS_SECRET_ACCESS_KEY=XXXXXXXXXX
...
</code></pre>
<h3 id="setting-up-the-router">Setting up the Router</h3>
<p>Almost done, phew. After starting all the necessary systemd services, this should be the first time a beautiful VS Code window is accessible on the iPad, but only on the same network.
Because I actually want to go outside my WI-FI range, I still had to open the 443 port on my router. Kinda scary, but code-server got us covered by blocking too many wrong password attempts. Since this is very router dependent, I'll let you figure that one out. It's probably a good time to configure a firewall on your PC as well.</p>
<h3 id="dyndns">DynDNS</h3>
<p>Everything is working by now, and if you have a static IP, you're done. Since my ISP doesn't give me one, I still had to configure some kind of DynDNS service to keep my IP address up-to-date in Route 53.
To achieve this, I configured yet another systemd service: <a href="https://github.com/famzah/aws-dyndns">GitHub link</a></p>
<h3 id="et-voila">Et Voil√†</h3>
<p>Using the power of my desktop PC right from the browser, including forwarding of locally hosted web services. In fact, I wrote this whole blog post on my iPad via code-server on my PC. The locally running <code>0.0.0.0:1111</code> Zola site was automatically served via <code>1111.XXXXXXXXXX.spiss.dev</code> behind the same password protection.
And nowadays, I even find myself connecting to the code-server from my Dell XPS 13, as the Desktop PC is just way more powerful, especially when compiling large Rust projects ;)</p>

<img src="https:&#x2F;&#x2F;www.spiss.dev&#x2F;processed_images&#x2F;codeserver.1779d23474e2b8b3.png" alt="VS Code on iPad" />
  </div>
</article>

  <footer class="text-center">
    <div class="socials">
      <a href="https:&#x2F;&#x2F;www.spiss.dev/about/">About</a>
      &bullet;
      <a href="https:&#x2F;&#x2F;www.spiss.dev/rss.xml">RSS</a>
      <a href="mailto:lukas@spiss.dev">Email</a>
      <a href="https://twitter.com/spissable">Twitter</a>
      <a href="https://github.com/spissable">GitHub</a>
    </div>
    <div class="copyright">
      Copyright ¬© 2023 Lukas Spiss &mdash;
      <a href="https://github.com/spissable/spiss.dev">Source on GitHub</a>
    </div>
  </footer>
  <script data-goatcounter="https://spiss.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</body>
</html>

